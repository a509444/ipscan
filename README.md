# ipscan

轻量的内网可达网段探测与存活 IP 探测工具。

**功能概览**
1. 探测可达网段（/24 级别），输出规范化网段（`.1/24`）。
2. 在可达网段内进行存活 IP 探测，输出存活 IP 列表。

**命令**
1. `icmpspy` (`is`)：使用 ICMP 探测可达网段
2. `pingspy` (`ps`)：使用系统 `ping` 探测可达网段
3. `arpspy` (`as`)：使用 ARP 探测可达网段（非 Windows）
4. `tcpspy` (`ts`)：使用 TCP 端口探测可达网段
5. `udpspy` (`us`)：使用 UDP 端口探测可达网段
6. `icmpspyall` (`isa`)：先探测可达网段，再扫描全部存活 IP

**输出**
1. `is/ps/as/ts/us`：默认输出到 `alive.txt`，内容为存活网段，格式 `x.x.x.1/24`
2. `isa`：阶段 1 输出可达网段到 `alive.txt`；阶段 2 输出存活 IP 到 `ip.txt`

**参数说明**
1. 全局参数（适用于所有命令）
   - `-c, --cidr`：指定探测网段（可多个，逗号分隔）
   - `-e, --end`：指定探测的 IP 尾号（默认 `1,254,2,255`）
   - `-r, --random`：每个网段随机补充的尾号数量（默认 `1`）
   - `-t, --thread`：并发数（默认 `cpu * 20`）
   - `-m, --timeout`：探测超时毫秒（默认 `500`）
   - `-o, --output`：输出文件路径（默认 `alive.txt`，`isa` 阶段 2 固定输出到 `ip.txt`）
   - `-x, --rapid`：快速模式（减少探测尾号数量）
   - `-i, --special`：探测特殊网段
   - `-f, --force`：强制探测每个网段的全部尾号
   - `-s, --silent`：仅输出存活结果
   - `-d, --debug`：输出调试信息
2. 命令参数
   - `is/isa`：`-t, --times`（每个 IP 的 ICMP 发送次数，默认 `1`）
   - `ps`：`-t, --times`（每个 IP 的 ping 次数，默认 `1`）
   - `as`：`-i, --interface`（ARP 使用的网卡名称，必填）
   - `ts`：`-p, --port`（TCP 端口列表，默认 `21,22,23,80,135,139,443,445,3389,8080`）
   - `us`：`-p, --port`（UDP 端口列表，默认 `53,123,137,161,520,523,1645,1701,1900,5353`）

**示例**
```
ipscan -c 192.168.0.0/16 is -t 2
ipscan -c 192.168.0.0/16 isa -t 2
```
