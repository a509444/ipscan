# ipscan

本项目的**原理与核心思路来自 netspy**，这里只是在 netspy 基础上进行改写与精简，保留其可达网段探测与存活 IP 探测的核心逻辑。

**功能概览**
1. 探测可达网段（/24 级别），输出规范化网段（`.1/24`）。
2. 在可达网段内进行存活 IP 探测，输出存活 IP 列表。

**命令**
1. `-is`：使用 ICMP 探测可达网段
2. `-isa`：先探测可达网段，再扫描全部存活 IP
3. `-ps`：使用系统 `ping` 探测可达网段
4. `-v`：显示版本信息

**输出**
1. `-is/-ps`：默认输出到 `alive.txt`，内容为存活网段，格式 `x.x.x.1/24`
2. `-isa`：阶段 1 输出可达网段到 `alive.txt`；阶段 2 输出存活 IP 到 `ip.txt`

**参数说明**
1. 全局参数（适用于所有命令）
   - `-c, --cidr`：指定探测网段（可多个，逗号分隔）
   - `-e, --end`：指定探测的 IP 尾号（默认 `1,254,2,255`）
   - `-r, --random`：每个网段随机补充的尾号数量（默认 `1`）
   - `-t, --thread`：并发数（默认 `cpu * 20`）
   - `-m, --timeout`：探测超时毫秒（默认 `500`）
   - `-o, --output`：输出文件路径（默认 `alive.txt`，`-isa` 阶段 2 固定输出到 `ip.txt`）
   - `-x, --rapid`：快速模式（减少探测尾号数量）
   - `-i, --special`：探测特殊网段
   - `-f, --force`：强制探测每个网段的全部尾号
   - `-s, --silent`：仅输出存活结果
   - `-d, --debug`：输出调试信息
2. 命令参数
   - `-is/-isa`：`--times`（每个 IP 的 ICMP 发送次数，默认 `1`）
   - `-ps`：`--times`（每个 IP 的 ping 次数，默认 `1`）

**示例**
```
ipscan -is -c 192.168.0.0/16 --times 2
ipscan -isa -c 192.168.0.0/16 --times 2
ipscan -ps -c 192.168.0.0/16 --times 2
```
